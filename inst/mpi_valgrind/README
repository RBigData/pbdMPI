This directory contains tests for memory lost of MPI program using valgrind.

File                    Purpose
-----------------------------------------------------------------------------
mpi_init_1.c             usual MPI program initialize and finalize
mpi_init_2.c             different argc and argv
mpi_init_3.c             fake argc and argv
pbdMPI-Ex_init.r         initialize and finalize using pbdMPI and R
pbdMPI-Ex_allreduce.r    initialize, run an example (allreduce), and finalize
a                        to compile and run all files above with valgrind
mpi_init_1.log           log file from valgrind
mpi_init_2.log           log file from valgrind
mpi_init_3.log           log file from valgrind
pbdMPI-Ex_init.log       log file from valgrind
pbdMPI-Ex_allreduce.log  log file from valgrind
check_lost.log           grep the memory lost amount from the log files above
-----------------------------------------------------------------------------

The file "check_lost.log" indicates that all five programs (*.c & *.r)
have the same amount of memory lost allocated withing MPI_Init(), but
MPI_Finalize() can not free them correctly.

The programs are tested in the system:
  - ubuntu 18.04.2
  - valgrind 3.13.0 (from "apt-get install")
  - openmpi 4.0.1   (manually installed with "CFLAGS=-fPIC")

Note that the valgrind may need to be configured with "--with-mpicc" in order
to check/track memory correctly.
